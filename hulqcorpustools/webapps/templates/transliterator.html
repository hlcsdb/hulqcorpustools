<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport"  content="width=device-width">
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='tools.css') }}" />
    <title>Hul’q’umi’num’ transliterator</title>
</head>

<body>
    <nav class="top-bar">
        <menu>
            <li><a href="{{ url_for('index') }}">back to tools list</a></li>
            <li><b>Transliterator</b></li>
            <li><a href="{{ url_for('wordfrequency.word_frequency_page')}}">Word frequency</a></li>
            <li><a href="{{ url_for('vocablookup.vocab_lookup_page') }}">Vocab lookup</a></b></li>
        </menu>
    </nav>
    <header>
        <h1>Hul’q’umi’num’ transliterator</h1>
        <p>This site can transliterate text from one way of writing Hul’q’umi’num’ to another.</p>
    </header>


<div class="tools-container">
    <div class="tool">
    <h2 name="string-transliterator">Text transliterator</h2>
    <p>Transliterate all of the text that you paste here.</p>
        <form method="post" class="user-prompt-container">
            <div class="format-row">
            <label for="source-format">
                Input text
            </label>

            <select class="format-selection" name="source-format" id="string-source-format">
                {%- for text_format, display_key in source_formats.items() -%}
                <option value="{{ text_format }}" name="{{ text_format }}" 
                {%- if response.get("source_format") == text_format  -%}
                selected
            {%- endif -%}> 
                    {{ display_key }}
                </option>
                {% endfor %}

            </select>
            </div>
            
            <textarea autofocus id="input" name="input-string">
                {%- if response.get("input_string") -%}
                    {{ response.get("input_string") }}
                {%- else -%}’uy’ skweyul si’em’
                {%- endif -%}
            </textarea>

            <div class="format-row">
            <label for="string-target-format">
                Output text
            </label>
            <select
                class="format-selection"
                name="target-format"
                id="string-target-format">
               
                {%- for text_format, display_key in target_formats.items() -%}
                <option
                    value="{{ text_format }}"
                    name="{{ text_format }}"
                    {%- if response.get("target_format") == text_format -%}
                        selected
                    {% elif text_format == "apaunicode" %}
                        selected
                    {%- endif -%}>
                    {{ display_key }}
                </option>
                    {% endfor %}
                </select>
            </div>
            
            <textarea id="output-text" type="transliterated-text"
                        readonly>
                        {%- if response.get("output_string") -%}
                        {{ response.get("output_string") }}
                        {%- else -%}
                        {%- endif -%}
            </textarea>

            <button
                type="submit"
                id="string-transliterate"
                name="transliterate-input"
                value="string">
            Transliterate
            </button>


                    
            </form>
            <hr>
            <h3>Sample text</h3>
            <p>Use these sentences to test how the transliterator works.</p>
            <div class="sample-text-holder">
            <ul>
                <li><h4>Straight</h4>
                    <p>n;ça÷ skøey;l c; s†e ˚ø; ≈øqø;¬qø;¬iw;n ni:n t;∑ scekø;l køs ÷;nƒ;s †a†aƒ;t.</p></li>
                <li><h4>APA Unicode</h4>
                    <p>nəc̓aʔ skʷeyəl cə st̓e k̓ʷə x̌ʷqʷəl̓qʷəl̓iwən ni:n təw̓ scekʷəl kʷs ʔənθəs t̓at̓aθət.</p></li>
                <li><h4>Practical orthography</h4>
            <p>nuts’a’ skweyul tsu st’e kw’u xwqwul’qwul’iwun niin tuw’ stsekwul kws ’unthus t’at’athut.</p>
                </li>
            </ul>
            </div>
        </div>


        <div class="tool" id="file-transliterator">

            <h2>File transliterator</h2>
            <p>Transliterate all of the Hul’q’umi’num’ in .docx and .txt files.</p>

            <form
                enctype="multipart/form-data"
                method="post"
                class="user-prompt-container">
                    <input
                        type="file"
                        name="files"
                        multiple accept=".docx,.txt,.doc">
                    <div class="format-row">
                        <label for="source-format">Input format</label>
                <select 
                    class="format-selection"
                    name="source-format"
                    id="file-source-format">
                    {%- for text_format, display_key in source_formats.items() -%}
                        <option
                            value="{{ text_format }}"
                            name="{{ text_format }}"
                            {%- if response.get("source_format") == text_format -%}
                            selected
                            {% endif %}>
                        {{ display_key }}</option>
                    {% endfor %}
                    </select>
                </div>
                <div class="format-row">
                <label for="target-format">Output format</label>
                <select
                    class="format-selection"
                    name="target-format"
                    id="file-target-format">
                        {%- for text_format, display_key in target_formats.items() -%}
                        <option
                            value="{{ text_format }}"
                            name="{{ text_format }}"
                    {%- if response.get("target_format") == text_format -%}
                            selected
                    {%- elif text_format == "apaunicode" %}
                            selected
                    {% endif%}>
                        {{ display_key }}</option>
                    {% endfor %}
                    </select>
                    </div>
                    <div id="font-search-section"
                    style="display: none;">
                        <input 
                            type="checkbox" 
                            id="font-search"
                            name="font-search"
                            value="True">
                        <label for="font-search">Find <i>Straight</i> format by font</label>
                    </div>
                <button
                    type="submit"
                    id="upload-transliterate"
                    name="transliterate-input"
                    value="files">Submit</button>

                {%- if response.get("output_files") -%}
                        <b>transliterated:</b>
                    {%- for _file in response.get("output_files"): -%}
                        <a href="{{ _file[1] }}">
                        {{ _file[0] }}
                        </a>
                    {% endfor %}
                    {% endif %}
            </form>
        </div>



        </div>

    </div>
    <script>
        const fileFormatSelection = document.querySelector('#file-source-format');
        const fontSearchSelectionSection = document.querySelector('#font-search-section');

        fileFormatSelection.addEventListener('change', (e) => {
            if (fileFormatSelection.value == 'Straight') {
                fontSearchSelectionSection.setAttribute('style', 'display: block');
            } else {
                fontSearchSelectionSection.setAttribute('style', 'display: none')
            }
        }
        )

    </script>
    <footer>v{{ current_version }}</footer>
</body>

</html>